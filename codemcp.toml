[project]
name = "bun-badges"
version = "0.0.1"
description = "Open Badges server implementation using Bun and Hono"

[quality]
min_test_coverage = 80
max_complexity = 10
max_lines_per_function = 50
max_parameters = 4
enforce_types = true

[style]
indent_size = 2
max_line_length = 100
quotes = "single"
semicolons = true

[patterns]
src_dir = "src"
test_dir = ["src/__tests__", "tests/unit", "tests/integration"]
build_dir = "dist"
docs_dir = "docs"

[naming]
components = "PascalCase"
functions = "camelCase"
variables = "camelCase"
constants = "UPPER_SNAKE_CASE"
types = "PascalCase"
interfaces = "PascalCase"

[git]
main_branch = "main"
commit_convention = "conventional"
require_issue_reference = true
protected_branches = ["main", "develop"]

[security]
require_auth = true
env_file_required = true
sensitive_patterns = [
  "password",
  "secret",
  "key",
  "token"
]

[dependencies]
package_manager = "bun"
lockfile_required = true
allow_only_exact_versions = false
security_audit_level = "high"

[commands]
bun = { execute = "bun" }
test = { execute = "bun test --preload ./tests/setup.ts" }
test_unit = { execute = "bun test 'src/__tests__/' 'tests/unit/' 'src/tests/' 'src/utils/**/__tests__/' 'src/services/__tests__/'" }
test_integration = { execute = "DATABASE_URL=postgres://postgres:postgres@localhost:5434/bun_badges_test bun test --preload ./tests/setup.ts tests/integration 'src/**/*.integration.test.ts'" }
test_all = { execute = "bash ./test-all.sh" }
docker_test_up = { execute = "docker-compose -f docker-compose.test.yml up -d" }
docker_test_down = { execute = "docker-compose -f docker-compose.test.yml down" }
docker_test_restart = { execute = "docker-compose -f docker-compose.test.yml down && docker-compose -f docker-compose.test.yml up -d" }

[testing]
framework = "bun:test"
require_tests = true
coverage_tool = "bun:coverage"
setup_file = "./tests/setup.ts"
unit_test_pattern = ["'src/__tests__/' 'tests/unit/' 'src/tests/' 'src/utils/**/__tests__/' 'src/services/__tests__/'"]
integration_test_pattern = ["tests/integration", "src/**/*.integration.test.ts", "src/services/__tests__/integration/", "src/routes/__tests__/integration/"]
exclude_pattern = ["src/**/*.integration.test.ts", "src/services/__tests__/integration/", "src/routes/__tests__/integration/"]
test_db_url = "postgres://postgres:postgres@localhost:5434/bun_badges_test"
test_docker_compose = "docker-compose.test.yml"

[documentation]
api_docs = true
readme_required = true
changelog_required = true
jsdoc_style = "minimal"

[ci]
required_checks = [
  "typecheck",
  "lint",
  "test",
  "build"
]

[database]
migrations_required = true
schema_docs_required = true
type = "postgresql"

[api]
framework = "hono"
openapi_spec_required = true
versioning_required = true

[development]
node_version = ">=20.0.0"
bun_version = ">=1.0.0"
use_strict_mode = true
use_typescript = true 